<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>循环打字机</title>
<style>
  body{background:#fff;color:#000;font:20px/1.6 'Courier New',monospace;padding:40px;}
  /* 光标闪烁 */
  .cursor{display:inline-block;width:2px;height:1em;background:#000;vertical-align:text-bottom;animation:blink .9s steps(1) infinite;}
  @keyframes blink{50%{opacity:0;}}
</style>
</head>
<body>
<div id="typer"></div>

<script>
const lines = [
  '第一行文案，打完就删。',
  '第二行文案，删完换下一行。',
  '第三行文案，循环往复。'
];
const typeSpeed = 120;
const delSpeed  = 120;
const holdDelay = 800;
const box = document.getElementById('typer');
let idx = 0;

async function sleep(ms){ return new Promise(r=>setTimeout(r,ms)); }
async function type(text){
  const cursor = document.createElement('span');
  cursor.className = 'cursor';
  box.appendChild(cursor);
  for(const ch of text){
    cursor.insertAdjacentText('beforebegin', ch);
    await sleep(typeSpeed);
  }
}
async function del(){
  const cursor = box.querySelector('.cursor');
  while(cursor.previousSibling){
    cursor.previousSibling.remove();
    await sleep(delSpeed);
  }
  cursor.remove();
}
async function loop(){
  while(true){
    await type(lines[idx]);
    await sleep(holdDelay);
    await del();
    await sleep(500)
    idx = (idx + 1) % lines.length;
  }
}

loop();
</script>
</body>
</html>
